<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo List</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        form {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <h1>ToDo List</h1>
    <form id="taskForm">
        <label for="title">Title:</label>
        <input type="text" id="title" required>
        <label for="description">Description:</label>
        <input type="text" id="description">
        <button type="button" onclick="addTask()">Add Task</button>
    </form>
    <ul id="taskList"></ul>

    <script>
        async function addTask() {
            const title = document.getElementById("title").value;
            const description = document.getElementById("description").value;

            if (!title) {
                alert("Title cannot be empty");
                return;
            }

            try {
                const response = await fetch('/tasks', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ title, description }),
                });

                if (response.ok) {
                    const task = await response.json();
                    displayTask(task);
                } else {
                    POST
                    console.error('Failed to add task');
                }
            } catch (error) {
                console.error(error);
            }
        }

      async function loadTasks() {
            const taskList = document.getElementById("taskList");
            taskList.innerHTML = '';

            try {
                const response = await fetch('/tasks');
                if (response.ok) {
                    const tasks = await response.json();
                    tasks.forEach(displayTask);
                } else {
                    console.error('Failed to fetch tasks');
                }
            } catch (error) {
                console.error(error);
            }
        }

    function displayTask(task) {
        const taskList = document.getElementById("taskList");

        const listItem = document.createElement("li");
        listItem.innerHTML = `
        <strong>${task.title}</strong>
        ${task.description ? `- ${task.description}` : ''}
        <button onclick="updateTask('${task._id}')">Update</button>
        <button onclick="deleteTask('${task._id}')">Delete</button>
      `;

        taskList.appendChild(listItem);
    }

        async function updateTask(id) {
            const newTitle = prompt('Enter new title:');
            const newDescription = prompt('Enter new description:');

            try {
                const response = await fetch(`/tasks/${id}`, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ title: newTitle, description: newDescription }),
                });

                if (response.ok) {
                    const updatedTask = await response.json();
                    // You may update the UI to reflect the changes, e.g., by reloading tasks
                    loadTasks();
                } else {
                    console.error('Failed to update task');
                }
            } catch (error) {
                console.error(error);
            }
        }

        async function deleteTask(id) {
            if (confirm('Are you sure you want to delete this task?')) {
                try {
                    const response = await fetch(`/tasks/${id}`, {
                        method: 'DELETE',
                    });

                    if (response.ok) {
                        // You may update the UI to reflect the changes, e.g., by reloading tasks
                        loadTasks();
                    } else {
                        console.error('Failed to delete task');
                    }
                } catch (error) {
                    console.error(error);
                }
            }
        }

        // Load tasks when the page is loaded
        loadTasks();
    </script>
</body>

</html> -->